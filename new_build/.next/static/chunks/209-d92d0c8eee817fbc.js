"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[209],{1209:function(e,t,i){var a=i(37790),l=i(48932),o={findMultipliersWithMinPercentage:function(e,t,i){let a=[],l=0;function backtrack(o,n,r){if(l++,o===t.length){let l=r.reduce((e,i,a)=>e+i*t[a],0);l>=i*e&&a.push([...r]);return}let s=Math.floor((e-n)/t[o]);for(let i=0;i<=s;i++)r[o]=i,n+i*t[o]<e&&backtrack(o+1,n+i*t[o],r)}return backtrack(0,0,[]),console.log(l),a},calcGrowthTime:function(e,t){let i=l.Z.createDecimal(t.originalShopGrowingBonus);i=l.Z.divideDecimal(i,1+.05*t.originalShopGrowingLevel),i=l.Z.multiplyDecimal(i,1+.05*t.shopGrowingSpeed).toNumber();let a=Math.floor(e.TimeNeeded/e.prestigeBonus/i);return a<10?10:a},calcPlantHarvest:function(e,t){return a.Z.roundInt((1+e.Rank)*Math.pow(1.05,e.Rank))*Math.pow(1.02,e.prestige)*t.manualHarvestBonus},calcShopProdBonus:function(e,t){return t=t||0===t?t:e.FarmingShopPlantTotalProduction,l.Z.pow(1.25,t)},calcProdOutput:function(e,t){let i=e.totalMade,a=t.shopProdBonus,o=e.prestige,n=l.Z.createDecimal(t.originalShopProdBonus);n=l.Z.divideDecimal(n,this.calcShopProdBonus(null,t.originalShopProdLevel)),n=l.Z.multiplyDecimal(a,n);let r=e.futureMult,s=l.Z.multiplyDecimal(l.Z.multiplyDecimal(l.Z.multiplyDecimal(i,r),n),l.Z.createDecimal(Math.pow(1.02,o)));return 1===e.ID&&(s=l.Z.multiplyDecimal(s,t.hpBonus)),s},calcFryOutput:function(e,t){if(!e||e.lessThan(1e16))return 0;let i=0,a=t.timePassed?t.timePassed:0;a>1800&&(i=a<86400?a/86400:1+(a-86400)/(172800+.5*(a-86400)));let o=l.Z.logDecimal(e,10),n=l.Z.subtractDecimal(o,15.75),r=o;r=r.lessThan(31)?r:31;let s=l.Z.subtractDecimal(36,r),c=l.Z.subtractDecimal(o,16),u=l.Z.pow(1.15,c),m=l.Z.multiplyDecimal(n,s),p=l.Z.multiplyDecimal(m,u),d=l.Z.createDecimal(t.fryBonus),h=l.Z.multiplyDecimal(p,d);return l.Z.multiplyDecimal(h,i)},calcCarryOverEXP_OLD:function(e){let{plant:t,numAutos:i,expTick:a}=e,l=0,o=1;if(i>1){let e=a/i,n=Math.ceil((t.reqExp-t.curExp)/e);if(i>n){l=(i-n)*e;let a=10+5*(t.Rank+o)*Math.pow(1.05,t.Rank+o);for(;l>a;)l-=a,o++,a=10+5*(t.Rank+o)*Math.pow(1.05,t.Rank+o)}else l=0}else l=0;let n=10+5*(t.Rank+o)*Math.pow(1.05,t.Rank+o);return{leftOver:l,numLevels:o,reqExp:n}},calcCarryOverEXP:function(e){let{plant:t,numAutos:i,expTick:a}=e,l=0,o=t.curExp+i*a,n=10+5*(t.Rank+l)*Math.pow(1.05,t.Rank+l);for(;o>=n;)o-=n,l++,n=10+5*(t.Rank+l)*Math.pow(1.05,t.Rank+l);return{leftOver:o,numLevels:l,reqExp:n}},calcEXPBonus:function(e){let t=e.originalRankLevelBonus,i=e.originalShopRankLevel,a=e.shopRankLevel,o=e.originalPotionRank,n=e.potionRank,r=l.Z.createDecimal(t);return r=l.Z.divideDecimal(r,1+.1*i),r=l.Z.divideDecimal(r,o>0?1.5:1),r=l.Z.multiplyDecimal(r,1+.1*a),r=(r=l.Z.multiplyDecimal(r,n)).toNumber()},futureMultBD:function(e,t){return l.Z.pow(1+.05*(1+.02*t.manualHarvestFormula),l.Z.logDecimal(e.created,1.25))},calcFutureMult:function(e,t){let i=!1===t.string?e:JSON.parse(JSON.stringify(e)),a=!1===t.string?t:JSON.parse(JSON.stringify(t)),o=a.time,n=a.numAuto||(null==a?void 0:a.numAuto)===0?a.numAuto:1,r=this.calcEXPBonus(a),s=i.prestigeBonus*r;if(i.growthTime=this.calcGrowthTime(i,a),0===n){let e=this.calcProdOutput(i,a);return i.production=e,i}for(;o>0;){i.timeToLevel=this.calcTimeTillLevel(i,a);let e=0,t=!1;i.timeToLevel>o?e=o:(e=i.timeToLevel,t=!0),o-=e,i.elapsedTime+=e;let r=0;if(i.elapsedTime>=i.growthTime){r=Math.floor(i.elapsedTime/i.growthTime);let e=i.perHarvest*r*n;if(i.created=l.Z.addDecimal(i.created,e),i.totalMade=l.Z.addDecimal(i.totalMade,e),i.futureMult=this.futureMultBD(i,a),t){let e=this.calcCarryOverEXP({plant:i,expTick:s*r,numAutos:n});i.curExp=e.leftOver,i.Rank+=e.numLevels,i.perHarvest=this.calcPlantHarvest(i,a),i.reqExp=e.reqExp}else{let e=r*s*n,t=i.curExp+e;i.curExp=t}i.elapsedTime=i.elapsedTime%i.growthTime}}let c=this.calcProdOutput(i,a);return i.production=c,i},calcTimeTillLevel:function(e,t){let i=t.numAuto||(null==t?void 0:t.numAuto)===0?t.numAuto:1;if(0===i)return 1/0;let a=e.reqExp-e.curExp,l=this.calcEXPBonus(t);return Math.ceil(a/(e.prestigeBonus*l*i))*e.growthTime-e.elapsedTime},getNextShopCosts:function(e){let t=1,i=e.FarmingShopPlantTotalProduction||0===e.FarmingShopPlantTotalProduction?e.FarmingShopPlantTotalProduction:e.shopProdLevel,a=1,o=e.FarmingShopPlantGrowingSpeed||0===e.FarmingShopPlantGrowingSpeed?e.FarmingShopPlantGrowingSpeed:e.shopGrowingSpeed,n=e.FarmingShopPlantRankExpEarned||0===e.FarmingShopPlantRankExpEarned?e.FarmingShopPlantRankExpEarned:e.shopRankLevel,r=l.Z.pow(1.05,i-50),s=l.Z.multiplyDecimal(100,r),c=l.Z.pow(s,i),u=l.Z.multiplyDecimal(1e8,c);return{prodCost:t=i>50?u:l.Z.multiplyDecimal(1e8,l.Z.pow(100,i)),growthCost:l.Z.multiplyDecimal(l.Z.pow(500,o),1e10),expCost:l.Z.multiplyDecimal(l.Z.pow(250,n),1e15)}},calcMaxPrestige:function(e){let t=e.prestige,i=0,a=!0;for(;a;){let l=10*Math.pow(2,t),o=i+l;e.created.greaterThanOrEqualTo(o)?(t++,i+=l):a=!1}return t-e.prestige},calcTimeTillPrestige:function(e,t){let i=JSON.parse(JSON.stringify(e));this.resetPlantBD(i);let a=JSON.parse(JSON.stringify(t));this.resetModifiersBD(a);let o=a.numAuto||(null==a?void 0:a.numAuto)===0?a.numAuto:1,n=!1,r=0,s=0,c=this.calcEXPBonus(a),u=i.prestigeBonus*c;for(;!n;){let e=this.calcTimeTillLevel(i,a),t=10*Math.pow(2,i.prestige),c=s+t,m=l.Z.subtractDecimal(c,i.created),p=l.Z.multiplyDecimal(l.Z.divideDecimal(m,i.perHarvest*o).ceil(),i.growthTime).ceil().toNumber();if(0===o&&m.greaterThan(0))n=!0,r=1/0;else if(p<=0)n=!0,r<=0&&(i.prestige++,n=!1,s+=t);else if(p>e){i.elapsedTime+=e;let t=Math.floor(i.elapsedTime/i.growthTime);i.created=l.Z.addDecimal(i.created,t*i.perHarvest*o),i.totalMade=l.Z.addDecimal(i.totalMade,t*i.perHarvest*o);let n=this.calcCarryOverEXP({plant:i,numAutos:o,expTick:u*t});i.Rank+=n.numLevels,i.curExp=n.leftOver,i.reqExp=n.reqExp,i.perHarvest=this.calcPlantHarvest(i,a),r+=e,i.elapsedTime=i.elapsedTime%i.growthTime}else{n=!0,i.elapsedTime+=p;let e=Math.floor(i.elapsedTime/i.growthTime);i.created=l.Z.addDecimal(i.created,e*i.perHarvest*o),i.totalMade=l.Z.addDecimal(i.totalMade,e*i.perHarvest*o),r+=p,i.elapsedTime=i.elapsedTime%i.growthTime}}return{remainingTime:r,prestige:i.prestige,prestiged:n}},resetPlantBD:function(e){var t,i,a,o,n,r;e.totalMade=(null==e?void 0:null===(t=e.totalMade)||void 0===t?void 0:t.mantissa)||(null==e?void 0:null===(i=e.totalMade)||void 0===i?void 0:i.mantissa)===0?e.totalMade:l.Z.createDecimal(e.totalMade),e.created=(null==e?void 0:null===(a=e.created)||void 0===a?void 0:a.mantissa)||(null==e?void 0:null===(o=e.created)||void 0===o?void 0:o.mantissa)===0?e.created:l.Z.createDecimal(e.created),e.production=(null==e?void 0:null===(n=e.production)||void 0===n?void 0:n.mantissa)||(null==e?void 0:null===(r=e.production)||void 0===r?void 0:r.mantissa)===0?e.production:l.Z.createDecimal(e.production),e.futureMult=l.Z.createDecimal(e.futureMult)},resetModifiersBD:function(e){var t,i,a,o,n,r,s;e.shopProdBonus=(null==e?void 0:null===(t=e.shopProdBonus)||void 0===t?void 0:t.mantissa)||(null==e?void 0:null===(i=e.shopProdBonus)||void 0===i?void 0:i.mantissa)===0?e.shopProdBonus:l.Z.createDecimal(e.shopProdBonus),e.hpBonus=(null==e?void 0:null===(a=e.hpBonus)||void 0===a?void 0:a.mantissa)||(null==e?void 0:null===(o=e.hpBonus)||void 0===o?void 0:o.mantissa)===0?e.hpBonus:l.Z.createDecimal(e.hpBonus),e.curPotatoes=(null==e?void 0:null===(n=e.curPotatoes)||void 0===n?void 0:n.mantissa)||(null==e?void 0:e.curPotatoes.mantissa)===0?e.curPotatoes:l.Z.createDecimal(e.curPotatoes),e.totalPotatoes=(null==e?void 0:null===(r=e.totalPotatoes)||void 0===r?void 0:r.mantissa)||(null==e?void 0:null===(s=e.totalPotatoes)||void 0===s?void 0:s.mantissa)===0?e.totalPotatoes:l.Z.createDecimal(e.totalPotatoes)},calcHPProd:function(e,t){let i=JSON.parse(JSON.stringify(e));for(let e=0;e<i.length;e++)this.resetPlantBD(i[e]);let n=JSON.parse(JSON.stringify(t));this.resetModifiersBD(n),n.nextCosts.prodCost=l.Z.createDecimal(n.nextCosts.prodCost),n.nextCosts.growthCost=l.Z.createDecimal(n.nextCosts.growthCost),n.nextCosts.expCost=l.Z.createDecimal(n.nextCosts.expCost);let r=n.numAutos,s=n.time,c=n.startTime?n.startTime:0,u=n.runningTime?n.runningTime:0,m=n.maxSteps?n.maxSteps:100,p=n.tickStart?n.tickStart:0,d=n.tickRate?n.tickRate:60,h=n.dataPointThreshold?n.dataPointThreshold:s/d<m?1:a.Z.roundInt(s/d/m),g=[],f=[],D=n.totalPotatoes,v=n.curPotatoes,P=Array(i.length).fill(0);for(let e=0;e<i.length;e++)P[e]=i[e].production;let Z=0,T=!1,B=1;for(d>2&&(B=.95),B=1;Z<s/d||T;Z++){let e=0;for(let t=i.length-1;t>=0;t--){let a=i[t],o=t===i.length-1?0:d>1?l.Z.multiplyDecimal(l.Z.addDecimal(P[t+1],i[t+1].production),.5*d*B):l.Z.multiplyDecimal(i[t+1].production,d);a.totalMade=l.Z.addDecimal(a.totalMade,o),1===(a=this.calcFutureMult(a,{...n,time:d,numAuto:r[t],string:!1})).ID&&(e=P[t]),P[t]=a.production}n.timePassed+=d,n.potionRank>1&&!n.forceRankPotion&&(n.potionRankTime-=d,n.potionRankTime<0&&(n.potionRank=1));let t=a.Z.roundInt(Z*d+c),m=d>1?l.Z.multiplyDecimal(l.Z.addDecimal(e,i[0].production),.525*d*B):i[0].production;if(D=l.Z.addDecimal(D,m),v=l.Z.addDecimal(v,m),n.autoBuyPBC){let e=!1,t=!0;for(;t;)if(t=!1,!0===v.greaterThanOrEqualTo(n.nextCosts.prodCost)&&(v=l.Z.subtractDecimal(v,n.nextCosts.prodCost),n.shopProdLevel++,n.shopProdBonus=this.calcShopProdBonus(n,n.shopProdLevel),e=!0,t=!0),!0===v.greaterThanOrEqualTo(n.nextCosts.growthCost)&&(v=l.Z.subtractDecimal(v,n.nextCosts.growthCost),n.shopGrowingSpeed++,e=!0,t=!0),!0===v.greaterThanOrEqualTo(n.nextCosts.expCost)&&(v=l.Z.subtractDecimal(v,n.nextCosts.expCost),n.shopRankLevel++,n.shopRankEXP=1+.1*n.shopRankLevel,e=!0,t=!0),e){let e=this.getNextShopCosts(n);n.nextCosts=e}}if(Z%h==0&&t>=p&&t<=s+u&&(g.push({time:t,production:D}),f.push({time:t,fries:l.Z.multiplyDecimal(o.calcFryOutput(D,n),1.05)})),!n.skipFinal){if(T&&t>=s+u)break;!T&&t<s+u&&(T=!0)}}if(Z>0&&!n.skipFinal){let e=a.Z.roundInt(Z*d+c);if(n.passedTime=Z*d+c,0===g.length)g.push({time:e,production:D}),f.push({time:e,fries:l.Z.multiplyDecimal(o.calcFryOutput(D,n),1.05)});else if(g[g.length-1].production!==D&&e>s+u){let t=e-g[g.length-1].time,i=l.Z.divideDecimal(l.Z.subtractDecimal(D,g[g.length-1].production),t),a=s+u-g[g.length-1].time,r=l.Z.addDecimal(g[g.length-1].production,l.Z.multiplyDecimal(i,a)),c={time:g[g.length-1].time+a,production:r};g.push(c),f.push({time:g[g.length-1].time+a,fries:l.Z.multiplyDecimal(o.calcFryOutput(D,n),1.05)}),D=r}}return{totalPotatoes:D,potatoeProduction:i[0].production,plants:i,nextCosts:n.nextCosts,dataPointsPotatoes:g,dataPointsFries:f,finalModifiers:n}},calcStepHPProd:function(e,t){let i=JSON.parse(JSON.stringify(e));for(let e=0;e<i.length;e++)this.resetPlantBD(i[e]);let l=JSON.parse(JSON.stringify(t));this.resetModifiersBD(l);let o=l.steps,n=-1,r=[],s=[],c=0,u=l.maxSteps?l.maxSteps:100,m=l.tickRate?l.tickRate:60,p=t.time/m<u?1:a.Z.roundInt(t.time/m/u);for(let e=0;e<o.length;e++)0!==o[e].time&&((l=(n=this.calcHPProd(i,{...l,numAutos:o[e].autos,time:o[e].time,dataPointThreshold:p,startTime:r.length>0?r[r.length-1].time:0,runningTime:c,skipFinal:e<o.length-1,tickStart:r.length>0?r[r.length-1].time+p*m:0})).finalModifiers).totalPotatoes=n.totalPotatoes,i=n.plants,r=r.concat(n.dataPointsPotatoes),s=s.concat(n.dataPointsFries),o[e].obj={text:"P".concat(o.length-e," for ").concat(o[e].time),numAutos:o[e].autos,time:o[e].time},c+=o[e].time);return -1===n?(n={}).dataPointsPotatoes=r:n.dataPointsPotatoes=r,n.dataPointsFries=s,n.steps=o,n},calcAssemblyHP:function(e){let t=1;return(null==e?void 0:e.AssemblerCollection[0].BonusList[0].StartingLevel)<=(null==e?void 0:e.AssemblerCollection[0].Level)&&(t=Math.pow(1+(null==e?void 0:e.AssemblerCollection[0].BonusList[0].Gain),(null==e?void 0:e.AssemblerCollection[0].Level)-(null==e?void 0:e.AssemblerCollection[0].BonusList[0].StartingLevel))),t},calcAssembly:function(e,t,i){let a=1;return(null==e?void 0:e.AssemblerCollection[t].BonusList[i].StartingLevel)<=(null==e?void 0:e.AssemblerCollection[t].Level)&&(a=Math.pow(1+(null==e?void 0:e.AssemblerCollection[t].BonusList[i].Gain),Math.max(0,e.AssemblerCollection[t].Level-(e.AssemblerCollection[t].BonusList[i].StartingLevel-1)))),a},calcAssemblyLine:function(e,t){let i=1;return e.StartingLevel<=t&&(i=Math.pow(1+e.Gain,Math.max(0,t-(e.StartingLevel-1)))),i},calcAssemblyCost:function(e,t){l.Z.createDecimal(-1);let i=l.Z.createDecimal(t.AssemblyCostReductionBonus),a=t.AssemblerCollection[e],o=l.Z.createDecimal(a.BaseCost),n=l.Z.addDecimal(o,l.Z.multiplyDecimal(o,a.Level)),r=1+a.CostExpo+a.CostExpo*a.Level*.02,s=l.Z.createDecimal(r),c=l.Z.pow(s,a.Level);return l.Z.divideDecimal(l.Z.multiplyDecimal(n,c),i)},calcProteinPerSecond:function(e){let t=l.Z.createDecimal(e.ProteinBonus),i=l.Z.createDecimal(e.FrenchFriesTotal),a=l.Z.createDecimal(1);if(i.greaterThan(1e10)){let e=l.Z.logDecimal(i,5);e=l.Z.subtractDecimal(e,13.48);let o=l.Z.logDecimal(i,10);o=l.Z.subtractDecimal(o,8),a=l.Z.multiplyDecimal(l.Z.multiplyDecimal(e,l.Z.pow(1.1,o)),t)}return a},calcContagionBonus:function(e,t){let i=1;return e.GrasshopperCollection[t].Locked>0&&(i*=Math.pow(1+.01*a.Z.calcPOW(e.GrasshopperCollection[t].BaseBonus),a.Z.calcPOW(e.GrasshopperCollection[t].Level))),i},calcExpeditionHP:function(e){let t=1;if(e.ExpeditionsCollection[16].Locked>0){let i=e.ExpeditionsCollection[16];t=Math.pow(1+i.BonusPower,i.Room-1)}return t},calcUniqueHPBonus:function(e){let t=1;for(let i=0;i<e.FarmingShopUniqueHealthy.length;i++)t*=e.FarmingShopUniqueHealthy[i]+1;return t},calcFriesHPBonus:function(e){return 1*(1+a.Z.calcPOW(e.FrenchFriesTotal)*((.01*e.FarmingShopFriesHealthyBonus+.1)*this.calcContagionBonus(e,5)))},calcPetHPBonus:function(e){let t=1,i=e.EquipedPetID,l=e.PetsCollection,o={};for(let e=0;e<i.length;e++)i[e]>0&&(o[i[e]]=!0);for(let e=0;e<l.length;e++){let i=l[e];if(i.ID in o)for(let e=0;e<i.BonusList.length;e++){let l=i.BonusList[e];23===l.ID&&(t+=.5*((Math.pow(1+l.Gain,i.Level)-1+Math.max(0,(.005*a.Z.calculateLogarithm(1.0125,i.Level+1)-1)*.5))*(1+.005*a.Z.calculateLogarithm(1.075,i.Rank+1))))}}return t},calcHPBonus:function(e){return a.Z.calcPOW(e.HealthyPotatoBonus)}};t.Z=o},48932:function(e,t,i){var a=i(42551);t.Z={createDecimal:function(e){return new a.Z(e.mantissa||0===e.mantissa?"".concat(e.mantissa,"e").concat(e.exponent):e)},createDecimalString:function(e){return new a.Z(e)},multiplyDecimal:function(e,t){return(e=e.mantissa||0===e.mantissa?e:this.createDecimal(e)).times(t)},divideDecimal:function(e,t){return(e=e.mantissa||0===e.mantissa?e:this.createDecimal(e)).dividedBy(t)},addDecimal:function(e,t){return(e=e.mantissa||0===e.mantissa?e:this.createDecimal(e)).plus(t)},subtractDecimal:function(e,t){return(e=e.mantissa||0===e.mantissa?e:this.createDecimal(e)).minus(t)},logDecimal:function(e,t){return e=e.mantissa||0===e.mantissa?e:this.createDecimal(e),this.createDecimal(e.log(t))},pow:function(e,t){return(e=e.mantissa||0===e.mantissa?e:this.createDecimal(e)).pow(t)},min:function(e,t){return(e=e.mantissa||0===e.mantissa?e:this.createDecimal(e),t=t.mantissa||0===t.mantissa?t:this.createDecimal(t),e.greaterThan(t))?t:e},max:function(e,t){return(e=e.mantissa||0===e.mantissa?e:this.createDecimal(e),t=t.mantissa||0===t.mantissa?t:this.createDecimal(t),e.greaterThan(t))?e:t}}}}]);