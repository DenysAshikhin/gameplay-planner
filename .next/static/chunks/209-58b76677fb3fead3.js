"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[209],{1209:function(t,e,o){var a=o(37790),i=o(48932),l={findMultipliersWithMinPercentage:function(t,e,o){let a=[],i=0;function backtrack(l,n,r){if(i++,l===e.length){let i=r.reduce((t,o,a)=>t+o*e[a],0);i>=o*t&&a.push([...r]);return}let s=Math.floor((t-n)/e[l]);for(let o=0;o<=s;o++)r[l]=o,n+o*e[l]<t&&backtrack(l+1,n+o*e[l],r)}return backtrack(0,0,[]),console.log(i),a},calcGrowthTime:function(t,e){let o=i.Z.createDecimal(e.originalShopGrowingBonus);o=i.Z.divideDecimal(o,1+.05*e.originalShopGrowingLevel),o=i.Z.multiplyDecimal(o,1+.05*e.shopGrowingSpeed).toNumber();let a=Math.floor(t.TimeNeeded/t.prestigeBonus/o);return a<10?10:a},calcPlantHarvest:function(t,e){return a.Z.roundInt((1+t.Rank)*Math.pow(1.05,t.Rank))*Math.pow(1.02,t.prestige)*e.manualHarvestBonus},calcShopProdBonus:function(t,e){return e=e||0===e?e:t.FarmingShopPlantTotalProduction,i.Z.pow(1.25,e)},calcProdOutput:function(t,e){let o=t.totalMade,a=e.shopProdBonus,l=t.prestige,n=i.Z.createDecimal(e.originalShopProdBonus);n=i.Z.divideDecimal(n,this.calcShopProdBonus(null,e.originalShopProdLevel)),n=i.Z.multiplyDecimal(a,n);let r=t.futureMult,s=i.Z.multiplyDecimal(i.Z.multiplyDecimal(i.Z.multiplyDecimal(o,r),n),i.Z.createDecimal(Math.pow(1.02,l)));return 1===t.ID&&(s=i.Z.multiplyDecimal(s,e.hpBonus)),s},calcFryOutput:function(t,e){if(t.lessThan(1e16))return 0;let o=0,a=e.timePassed?e.timePassed:0;a>1800&&(o=a<86400?a/86400:1+(a-86400)/(172800+.5*(a-86400)));let l=i.Z.logDecimal(t,10),n=i.Z.subtractDecimal(l,15.75),r=l;r=r.lessThan(31)?r:31;let s=i.Z.subtractDecimal(36,r),c=i.Z.subtractDecimal(l,16),u=i.Z.pow(1.15,c),m=i.Z.multiplyDecimal(n,s),p=i.Z.multiplyDecimal(m,u),d=i.Z.createDecimal(e.fryBonus),h=i.Z.multiplyDecimal(p,d);return i.Z.multiplyDecimal(h,o)},calcCarryOverEXP_OLD:function(t){let{plant:e,numAutos:o,expTick:a}=t,i=0,l=1;if(o>1){let t=a/o,n=Math.ceil((e.reqExp-e.curExp)/t);if(o>n){i=(o-n)*t;let a=10+5*(e.Rank+l)*Math.pow(1.05,e.Rank+l);for(;i>a;)i-=a,l++,a=10+5*(e.Rank+l)*Math.pow(1.05,e.Rank+l)}else i=0}else i=0;let n=10+5*(e.Rank+l)*Math.pow(1.05,e.Rank+l);return{leftOver:i,numLevels:l,reqExp:n}},calcCarryOverEXP:function(t){let{plant:e,numAutos:o,expTick:a}=t,i=0,l=e.curExp+o*a,n=10+5*(e.Rank+i)*Math.pow(1.05,e.Rank+i);for(;l>=n;)l-=n,i++,n=10+5*(e.Rank+i)*Math.pow(1.05,e.Rank+i);return{leftOver:l,numLevels:i,reqExp:n}},calcEXPBonus:function(t){let e=t.originalRankLevelBonus,o=t.originalShopRankLevel,a=t.shopRankLevel,l=t.originalPotionRank,n=t.potionRank,r=i.Z.createDecimal(e);return r=i.Z.divideDecimal(r,1+.1*o),r=i.Z.divideDecimal(r,l>0?1.5:1),r=i.Z.multiplyDecimal(r,1+.1*a),r=(r=i.Z.multiplyDecimal(r,n)).toNumber()},futureMultBD:function(t,e){return i.Z.pow(1+.05*(1+.02*e.manualHarvestFormula),i.Z.logDecimal(t.created,1.25))},calcFutureMult:function(t,e){let o=!1===e.string?t:JSON.parse(JSON.stringify(t)),a=!1===e.string?e:JSON.parse(JSON.stringify(e)),l=a.time,n=a.numAuto||(null==a?void 0:a.numAuto)===0?a.numAuto:1,r=this.calcEXPBonus(a),s=o.prestigeBonus*r;if(o.growthTime=this.calcGrowthTime(o,a),0===n){let t=this.calcProdOutput(o,a);return o.production=t,o}for(;l>0;){o.timeToLevel=this.calcTimeTillLevel(o,a);let t=0,e=!1;o.timeToLevel>l?t=l:(t=o.timeToLevel,e=!0),l-=t,o.elapsedTime+=t;let r=0;if(o.elapsedTime>=o.growthTime){r=Math.floor(o.elapsedTime/o.growthTime);let t=o.perHarvest*r*n;if(o.created=i.Z.addDecimal(o.created,t),o.totalMade=i.Z.addDecimal(o.totalMade,t),o.futureMult=this.futureMultBD(o,a),e){let t=this.calcCarryOverEXP({plant:o,expTick:s*r,numAutos:n});o.curExp=t.leftOver,o.Rank+=t.numLevels,o.perHarvest=this.calcPlantHarvest(o,a),o.reqExp=t.reqExp}else{let t=r*s*n,e=o.curExp+t;o.curExp=e}o.elapsedTime=o.elapsedTime%o.growthTime}}let c=this.calcProdOutput(o,a);return o.production=c,o},calcTimeTillLevel:function(t,e){let o=e.numAuto||(null==e?void 0:e.numAuto)===0?e.numAuto:1;if(0===o)return 1/0;let a=t.reqExp-t.curExp,i=this.calcEXPBonus(e);return Math.ceil(a/(t.prestigeBonus*i*o))*t.growthTime-t.elapsedTime},getNextShopCosts:function(t){let e=1,o=t.FarmingShopPlantTotalProduction||0===t.FarmingShopPlantTotalProduction?t.FarmingShopPlantTotalProduction:t.shopProdLevel,a=1,l=t.FarmingShopPlantGrowingSpeed||0===t.FarmingShopPlantGrowingSpeed?t.FarmingShopPlantGrowingSpeed:t.shopGrowingSpeed,n=t.FarmingShopPlantRankExpEarned||0===t.FarmingShopPlantRankExpEarned?t.FarmingShopPlantRankExpEarned:t.shopRankLevel,r=i.Z.pow(1.05,o-50),s=i.Z.multiplyDecimal(100,r),c=i.Z.pow(s,o),u=i.Z.multiplyDecimal(1e8,c);return{prodCost:e=o>50?u:i.Z.multiplyDecimal(1e8,i.Z.pow(100,o)),growthCost:i.Z.multiplyDecimal(i.Z.pow(500,l),1e10),expCost:i.Z.multiplyDecimal(i.Z.pow(250,n),1e15)}},calcMaxPrestige:function(t){let e=t.prestige,o=0,a=!0;for(;a;){let i=10*Math.pow(2,e),l=o+i;t.created.greaterThanOrEqualTo(l)?(e++,o+=i):a=!1}return e-t.prestige},calcTimeTillPrestige:function(t,e){let o=JSON.parse(JSON.stringify(t));this.resetPlantBD(o);let a=JSON.parse(JSON.stringify(e));this.resetModifiersBD(a);let l=a.numAuto||(null==a?void 0:a.numAuto)===0?a.numAuto:1,n=!1,r=0,s=0,c=this.calcEXPBonus(a),u=o.prestigeBonus*c;for(;!n;){let t=this.calcTimeTillLevel(o,a),e=10*Math.pow(2,o.prestige),c=s+e,m=i.Z.subtractDecimal(c,o.created),p=i.Z.multiplyDecimal(i.Z.divideDecimal(m,o.perHarvest*l).ceil(),o.growthTime).ceil().toNumber();if(0===l&&m.greaterThan(0))n=!0,r=1/0;else if(p<=0)n=!0,r<=0&&(o.prestige++,n=!1,s+=e);else if(p>t){o.elapsedTime+=t;let e=Math.floor(o.elapsedTime/o.growthTime);o.created=i.Z.addDecimal(o.created,e*o.perHarvest*l),o.totalMade=i.Z.addDecimal(o.totalMade,e*o.perHarvest*l);let n=this.calcCarryOverEXP({plant:o,numAutos:l,expTick:u*e});o.Rank+=n.numLevels,o.curExp=n.leftOver,o.reqExp=n.reqExp,o.perHarvest=this.calcPlantHarvest(o,a),r+=t,o.elapsedTime=o.elapsedTime%o.growthTime}else{n=!0,o.elapsedTime+=p;let t=Math.floor(o.elapsedTime/o.growthTime);o.created=i.Z.addDecimal(o.created,t*o.perHarvest*l),o.totalMade=i.Z.addDecimal(o.totalMade,t*o.perHarvest*l),r+=p,o.elapsedTime=o.elapsedTime%o.growthTime}}return{remainingTime:r,prestige:o.prestige,prestiged:n}},resetPlantBD:function(t){var e,o,a,l,n,r;t.totalMade=(null==t?void 0:null===(e=t.totalMade)||void 0===e?void 0:e.mantissa)||(null==t?void 0:null===(o=t.totalMade)||void 0===o?void 0:o.mantissa)===0?t.totalMade:i.Z.createDecimal(t.totalMade),t.created=(null==t?void 0:null===(a=t.created)||void 0===a?void 0:a.mantissa)||(null==t?void 0:null===(l=t.created)||void 0===l?void 0:l.mantissa)===0?t.created:i.Z.createDecimal(t.created),t.production=(null==t?void 0:null===(n=t.production)||void 0===n?void 0:n.mantissa)||(null==t?void 0:null===(r=t.production)||void 0===r?void 0:r.mantissa)===0?t.production:i.Z.createDecimal(t.production),t.futureMult=i.Z.createDecimal(t.futureMult)},resetModifiersBD:function(t){var e,o,a,l,n,r,s;t.shopProdBonus=(null==t?void 0:null===(e=t.shopProdBonus)||void 0===e?void 0:e.mantissa)||(null==t?void 0:null===(o=t.shopProdBonus)||void 0===o?void 0:o.mantissa)===0?t.shopProdBonus:i.Z.createDecimal(t.shopProdBonus),t.hpBonus=(null==t?void 0:null===(a=t.hpBonus)||void 0===a?void 0:a.mantissa)||(null==t?void 0:null===(l=t.hpBonus)||void 0===l?void 0:l.mantissa)===0?t.hpBonus:i.Z.createDecimal(t.hpBonus),t.curPotatoes=(null==t?void 0:null===(n=t.curPotatoes)||void 0===n?void 0:n.mantissa)||(null==t?void 0:t.curPotatoes.mantissa)===0?t.curPotatoes:i.Z.createDecimal(t.curPotatoes),t.totalPotatoes=(null==t?void 0:null===(r=t.totalPotatoes)||void 0===r?void 0:r.mantissa)||(null==t?void 0:null===(s=t.totalPotatoes)||void 0===s?void 0:s.mantissa)===0?t.totalPotatoes:i.Z.createDecimal(t.totalPotatoes)},calcHPProd:function(t,e){let o=JSON.parse(JSON.stringify(t));for(let t=0;t<o.length;t++)this.resetPlantBD(o[t]);let n=JSON.parse(JSON.stringify(e));this.resetModifiersBD(n),n.nextCosts.prodCost=i.Z.createDecimal(n.nextCosts.prodCost),n.nextCosts.growthCost=i.Z.createDecimal(n.nextCosts.growthCost),n.nextCosts.expCost=i.Z.createDecimal(n.nextCosts.expCost);let r=n.numAutos,s=n.time,c=n.startTime?n.startTime:0,u=n.runningTime?n.runningTime:0,m=n.maxSteps?n.maxSteps:100,p=n.tickStart?n.tickStart:0,d=n.tickRate?n.tickRate:60,h=n.dataPointThreshold?n.dataPointThreshold:s/d<m?1:a.Z.roundInt(s/d/m),f=[],g=[],v=n.totalPotatoes,D=n.curPotatoes,P=Array(o.length).fill(0);for(let t=0;t<o.length;t++)P[t]=o[t].production;let Z=0,T=!1,M=1;for(d>2&&(M=.95);Z<s/d||T;Z++){let t=0;for(let e=o.length-1;e>=0;e--){let a=o[e],l=e===o.length-1?0:d>1?i.Z.multiplyDecimal(i.Z.addDecimal(P[e+1],o[e+1].production),.55*d*M):i.Z.multiplyDecimal(o[e+1].production,d);a.totalMade=i.Z.addDecimal(a.totalMade,l),1===(a=this.calcFutureMult(a,{...n,time:d,numAuto:r[e],string:!1})).ID&&(t=P[e]),P[e]=a.production}n.passedTime+=d,n.potionRank>1&&!n.forceRankPotion&&(n.potionRankTime-=d,n.potionRankTime<0&&(n.potionRank=1));let e=a.Z.roundInt(Z*d+c),m=d>1?i.Z.multiplyDecimal(i.Z.addDecimal(t,o[0].production),.55*d*M):o[0].production;if(v=i.Z.addDecimal(v,m),D=i.Z.addDecimal(D,m),n.autoBuyPBC){let t=!1,e=!0;for(;e;)if(e=!1,!0===D.greaterThanOrEqualTo(n.nextCosts.prodCost)&&(D=i.Z.subtractDecimal(D,n.nextCosts.prodCost),n.shopProdLevel++,n.shopProdBonus=this.calcShopProdBonus(n,n.shopProdLevel),t=!0,e=!0),!0===D.greaterThanOrEqualTo(n.nextCosts.growthCost)&&(D=i.Z.subtractDecimal(D,n.nextCosts.growthCost),n.shopGrowingSpeed++,t=!0,e=!0),!0===D.greaterThanOrEqualTo(n.nextCosts.expCost)&&(D=i.Z.subtractDecimal(D,n.nextCosts.expCost),n.shopRankLevel++,n.shopRankEXP=1+.1*n.shopRankLevel,t=!0,e=!0),t){let t=this.getNextShopCosts(n);n.nextCosts=t}}if(Z%h==0&&e>=p&&e<=s+u&&(f.push({time:e,production:v}),g.push({time:e,fries:l.calcFryOutput(v,n)})),!n.skipFinal){if(T&&e>=s+u)break;!T&&e<s+u&&(T=!0)}}if(Z>0&&!n.skipFinal){let t=a.Z.roundInt(Z*d+c);if(n.passedTime=Z*d+c,0===f.length)f.push({time:t,production:v}),g.push({time:t,fries:l.calcFryOutput(v,n)});else if(f[f.length-1].production!==v&&t>s+u){let e=t-f[f.length-1].time,o=i.Z.divideDecimal(i.Z.subtractDecimal(v,f[f.length-1].production),e),a=s+u-f[f.length-1].time,r=i.Z.addDecimal(f[f.length-1].production,i.Z.multiplyDecimal(o,a)),c={time:f[f.length-1].time+a,production:r};f.push(c),g.push({time:f[f.length-1].time+a,fries:l.calcFryOutput(r,n)}),v=r}}return{totalPotatoes:v,potatoeProduction:o[0].production,plants:o,nextCosts:n.nextCosts,dataPointsPotatoes:f,dataPointsFries:g,finalModifiers:n}},calcStepHPProd:function(t,e){let o=JSON.parse(JSON.stringify(t));for(let t=0;t<o.length;t++)this.resetPlantBD(o[t]);let i=JSON.parse(JSON.stringify(e));this.resetModifiersBD(i);let l=i.steps,n=-1,r=[],s=[],c=0,u=i.maxSteps?i.maxSteps:100,m=i.tickRate?i.tickRate:60,p=e.time/m<u?1:a.Z.roundInt(e.time/m/u);for(let t=0;t<l.length;t++)0!==l[t].time&&((i=(n=this.calcHPProd(o,{...i,numAutos:l[t].autos,time:l[t].time,dataPointThreshold:p,startTime:r.length>0?r[r.length-1].time:0,runningTime:c,skipFinal:t<l.length-1,tickStart:r.length>0?r[r.length-1].time+p*m:0})).finalModifiers).totalPotatoes=n.totalPotatoes,o=n.plants,r=r.concat(n.dataPointsPotatoes),s=s.concat(n.dataPointsFries),l[t].obj={text:"P".concat(l.length-t," for ").concat(l[t].time),numAutos:l[t].autos,time:l[t].time},c+=l[t].time);return n.dataPointsPotatoes=r,n.dataPointsFries=s,n.steps=l,n},calcAssemblyHP:function(t){let e=1;return(null==t?void 0:t.AssemblerCollection[0].BonusList[0].StartingLevel)<=(null==t?void 0:t.AssemblerCollection[0].Level)&&(e=Math.pow(1+(null==t?void 0:t.AssemblerCollection[0].BonusList[0].Gain),(null==t?void 0:t.AssemblerCollection[0].Level)-(null==t?void 0:t.AssemblerCollection[0].BonusList[0].StartingLevel))),e},calcAssembly:function(t,e,o){let a=1;return(null==t?void 0:t.AssemblerCollection[e].BonusList[o].StartingLevel)<=(null==t?void 0:t.AssemblerCollection[e].Level)&&(a=Math.pow(1+(null==t?void 0:t.AssemblerCollection[e].BonusList[o].Gain),Math.max(0,t.AssemblerCollection[e].Level-(t.AssemblerCollection[e].BonusList[o].StartingLevel-1)))),a},calcAssemblyLine:function(t,e){let o=1;return t.StartingLevel<=e&&(o=Math.pow(1+t.Gain,Math.max(0,e-(t.StartingLevel-1)))),o},calcAssemblyCost:function(t,e){i.Z.createDecimal(-1);let o=i.Z.createDecimal(e.AssemblyCostReductionBonus),a=e.AssemblerCollection[t],l=i.Z.createDecimal(a.BaseCost),n=i.Z.addDecimal(l,i.Z.multiplyDecimal(l,a.Level)),r=1+a.CostExpo+a.CostExpo*a.Level*.02,s=i.Z.createDecimal(r),c=i.Z.pow(s,a.Level);return i.Z.divideDecimal(i.Z.multiplyDecimal(n,c),o)},calcProteinPerSecond:function(t){let e=i.Z.createDecimal(t.ProteinBonus),o=i.Z.createDecimal(t.FrenchFriesTotal),a=i.Z.createDecimal(1);if(o.greaterThan(1e10)){let t=i.Z.logDecimal(o,5);t=i.Z.subtractDecimal(t,13.48);let l=i.Z.logDecimal(o,10);l=i.Z.subtractDecimal(l,8),a=i.Z.multiplyDecimal(i.Z.multiplyDecimal(t,i.Z.pow(1.1,l)),e)}return a},calcContagionBonus:function(t,e){let o=1;return t.GrasshopperCollection[e].Locked>0&&(o*=Math.pow(1+.01*a.Z.calcPOW(t.GrasshopperCollection[e].BaseBonus),a.Z.calcPOW(t.GrasshopperCollection[e].Level))),o},calcExpeditionHP:function(t){let e=1;if(t.ExpeditionsCollection[16].Locked>0){let o=t.ExpeditionsCollection[16];e=Math.pow(1+o.BonusPower,o.Room-1)}return e},calcUniqueHPBonus:function(t){let e=1;for(let o=0;o<t.FarmingShopUniqueHealthy.length;o++)e*=t.FarmingShopUniqueHealthy[o]+1;return e},calcFriesHPBonus:function(t){return 1*(1+a.Z.calcPOW(t.FrenchFriesTotal)*((.01*t.FarmingShopFriesHealthyBonus+.1)*this.calcContagionBonus(t,5)))},calcPetHPBonus:function(t){let e=1,o=t.EquipedPetID,i=t.PetsCollection,l={};for(let t=0;t<o.length;t++)o[t]>0&&(l[o[t]]=!0);for(let t=0;t<i.length;t++){let o=i[t];if(o.ID in l)for(let t=0;t<o.BonusList.length;t++){let i=o.BonusList[t];23===i.ID&&(e+=.5*((Math.pow(1+i.Gain,o.Level)-1+Math.max(0,(.005*a.Z.calculateLogarithm(1.0125,o.Level+1)-1)*.5))*(1+.005*a.Z.calculateLogarithm(1.075,o.Rank+1))))}}return e},calcHPBonus:function(t){return a.Z.calcPOW(t.HealthyPotatoBonus)}};e.Z=l},37790:function(t,e){e.Z={roundTwoDecimal:function(t){return Math.round((t+Number.EPSILON)*100)/100},roundThreeDecimal:function(t){return Math.round((t+Number.EPSILON)*1e3)/1e3},roundFiveDecimal:function(t){return Math.round((t+Number.EPSILON)*1e5)/1e5},roundInt:function(t){return Math.round((t+Number.EPSILON)*1)/1},calculateLogarithm:function(t,e){return Math.log(e)/Math.log(t)},calcPOW:function(t){return t.mantissa*Math.pow(10,t.exponent)},secondsToStringWithS:function(t){let e="",o=0,a=0,i=0,l=0;return(o=Math.floor(t/86400),a=Math.floor(t%86400/3600),i=Math.floor(t%3600/60),l=this.roundInt(t%86400%60),o==Number.POSITIVE_INFINITY||o==Number.NEGATIVE_INFINITY)?""+o:(60===l&&(l=0,i++),60===i&&(i=0,a++),24===a&&(a=0,o++),o>0&&(e+="".concat(o<10?"0"+o:o,"d:")),a>0&&(e+="".concat(a<10?"0"+a:a,"h:")),i>0&&(e+="".concat(i<10?"0"+i:i,"m:")),l>0?e+="".concat(l<10?"0"+l:l,"s"):e+="0s",e)},secondsToString:function(t){let e="",o=0,a=0,i=0;return(o=Math.floor(t/86400),a=Math.floor(t%86400/3600),60===(i=this.roundInt(t%3600/60))&&(i=0,a++),24===a&&(a=0,o++),o==Number.POSITIVE_INFINITY||o==Number.NEGATIVE_INFINITY)?""+o:(o>0&&(e+="".concat(o<10?"0"+o:o,"d:"),0===a&&(e+="00h")),(a>0||0===a&&0===o)&&(e+="".concat(a<10?"0"+a:a,"h")),0===o&&(e+=":",i>0?e+="".concat(i<10?"0"+i:i,"m"):e+="0s"),e)},bonusColorMap:{1009:{color:"cyan"},1010:{color:"maroon"},1011:{color:"purple"},1012:{color:"yellow"},1013:{color:"red"},1014:{color:"blue"},1015:{color:"gray"},1016:{color:"green"}}}},48932:function(t,e,o){var a=o(42551);e.Z={createDecimal:function(t){return new a.Z(t.mantissa||0===t.mantissa?"".concat(t.mantissa,"e").concat(t.exponent):t)},multiplyDecimal:function(t,e){return(t=t.mantissa||0===t.mantissa?t:this.createDecimal(t)).times(e)},divideDecimal:function(t,e){return(t=t.mantissa||0===t.mantissa?t:this.createDecimal(t)).dividedBy(e)},addDecimal:function(t,e){return(t=t.mantissa||0===t.mantissa?t:this.createDecimal(t)).plus(e)},subtractDecimal:function(t,e){return(t=t.mantissa||0===t.mantissa?t:this.createDecimal(t)).minus(e)},logDecimal:function(t,e){return t=t.mantissa||0===t.mantissa?t:this.createDecimal(t),this.createDecimal(t.log(e))},pow:function(t,e){return(t=t.mantissa||0===t.mantissa?t:this.createDecimal(t)).pow(e)},min:function(t,e){return(t=t.mantissa||0===t.mantissa?t:this.createDecimal(t),e=e.mantissa||0===e.mantissa?e:this.createDecimal(e),t.greaterThan(e))?e:t},max:function(t,e){return(t=t.mantissa||0===t.mantissa?t:this.createDecimal(t),e=e.mantissa||0===e.mantissa?e:this.createDecimal(e),t.greaterThan(e))?t:e}}}}]);