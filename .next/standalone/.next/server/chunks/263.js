"use strict";exports.id=263,exports.ids=[263],exports.modules={11263:(e,t,a)=>{a.d(t,{Z:()=>n});var o=a(5492),i=a(92989),l={findMultipliersWithMinPercentage:function(e,t,a){let o=[],i=0;function backtrack(l,n,r){if(i++,l===t.length){let i=r.reduce((e,a,o)=>e+a*t[o],0);i>=a*e&&o.push([...r]);return}let s=Math.floor((e-n)/t[l]);for(let a=0;a<=s;a++)r[l]=a,n+a*t[l]<e&&backtrack(l+1,n+a*t[l],r)}return backtrack(0,0,[]),console.log(i),o},calcGrowthTime:function(e,t){let a=i.Z.createDecimal(t.originalShopGrowingBonus);a=i.Z.divideDecimal(a,1+.05*t.originalShopGrowingLevel),a=i.Z.multiplyDecimal(a,1+.05*t.shopGrowingSpeed).toNumber();let o=Math.floor(e.TimeNeeded/e.prestigeBonus/a);return o<10?10:o},calcPlantHarvest:function(e,t){return o.Z.roundInt((1+e.Rank)*Math.pow(1.05,e.Rank))*Math.pow(1.02,e.prestige)*t.manualHarvestBonus},calcShopProdBonus:function(e,t){return t=t||0===t?t:e.FarmingShopPlantTotalProduction,i.Z.pow(1.25,t)},calcProdOutput:function(e,t){let a=e.totalMade,o=t.shopProdBonus,l=e.prestige,n=i.Z.createDecimal(t.originalShopProdBonus);n=i.Z.divideDecimal(n,this.calcShopProdBonus(null,t.originalShopProdLevel)),n=i.Z.multiplyDecimal(o,n);let r=e.futureMult,s=i.Z.multiplyDecimal(i.Z.multiplyDecimal(i.Z.multiplyDecimal(a,r),n),i.Z.createDecimal(Math.pow(1.02,l)));return 1===e.ID&&(s=i.Z.multiplyDecimal(s,t.hpBonus)),s},calcFryOutput:function(e,t){if(e.lessThan(1e16))return 0;let a=0,o=t.timePassed?t.timePassed:0;o>1800&&(a=o<86400?o/86400:1+(o-86400)/(172800+.5*(o-86400)));let l=i.Z.logDecimal(e,10),n=i.Z.subtractDecimal(l,15.75),r=l;r=r.lessThan(31)?r:31;let s=i.Z.subtractDecimal(36,r),c=i.Z.subtractDecimal(l,16),u=i.Z.pow(1.15,c),m=i.Z.multiplyDecimal(n,s),p=i.Z.multiplyDecimal(m,u),d=i.Z.createDecimal(t.fryBonus),h=i.Z.multiplyDecimal(p,d);return i.Z.multiplyDecimal(h,a)},calcCarryOverEXP_OLD:function({plant:e,numAutos:t,expTick:a}){let o=0,i=1;if(t>1){let l=a/t,n=Math.ceil((e.reqExp-e.curExp)/l);if(t>n){o=(t-n)*l;let a=10+5*(e.Rank+i)*Math.pow(1.05,e.Rank+i);for(;o>a;)o-=a,i++,a=10+5*(e.Rank+i)*Math.pow(1.05,e.Rank+i)}else o=0}else o=0;let l=10+5*(e.Rank+i)*Math.pow(1.05,e.Rank+i);return{leftOver:o,numLevels:i,reqExp:l}},calcCarryOverEXP:function({plant:e,numAutos:t,expTick:a}){let o=0,i=e.curExp+t*a,l=10+5*(e.Rank+o)*Math.pow(1.05,e.Rank+o);for(;i>=l;)i-=l,o++,l=10+5*(e.Rank+o)*Math.pow(1.05,e.Rank+o);return{leftOver:i,numLevels:o,reqExp:l}},calcEXPBonus:function(e){let t=e.originalRankLevelBonus,a=e.originalShopRankLevel,o=e.shopRankLevel,l=e.originalPotionRank,n=e.potionRank,r=i.Z.createDecimal(t);return r=i.Z.divideDecimal(r,1+.1*a),r=i.Z.divideDecimal(r,l>0?1.5:1),r=i.Z.multiplyDecimal(r,1+.1*o),r=(r=i.Z.multiplyDecimal(r,n)).toNumber()},futureMultBD:function(e,t){return i.Z.pow(1+.05*(1+.02*t.manualHarvestFormula),i.Z.logDecimal(e.created,1.25))},calcFutureMult:function(e,t){let a=!1===t.string?e:JSON.parse(JSON.stringify(e)),o=!1===t.string?t:JSON.parse(JSON.stringify(t)),l=o.time,n=o.numAuto||o?.numAuto===0?o.numAuto:1,r=this.calcEXPBonus(o),s=a.prestigeBonus*r;if(a.growthTime=this.calcGrowthTime(a,o),0===n){let e=this.calcProdOutput(a,o);return a.production=e,a}for(;l>0;){a.timeToLevel=this.calcTimeTillLevel(a,o);let e=0,t=!1;a.timeToLevel>l?e=l:(e=a.timeToLevel,t=!0),l-=e,a.elapsedTime+=e;let r=0;if(a.elapsedTime>=a.growthTime){r=Math.floor(a.elapsedTime/a.growthTime);let e=a.perHarvest*r*n;if(a.created=i.Z.addDecimal(a.created,e),a.totalMade=i.Z.addDecimal(a.totalMade,e),a.futureMult=this.futureMultBD(a,o),t){let e=this.calcCarryOverEXP({plant:a,expTick:s*r,numAutos:n});a.curExp=e.leftOver,a.Rank+=e.numLevels,a.perHarvest=this.calcPlantHarvest(a,o),a.reqExp=e.reqExp}else{let e=r*s*n,t=a.curExp+e;a.curExp=t}a.elapsedTime=a.elapsedTime%a.growthTime}}let c=this.calcProdOutput(a,o);return a.production=c,a},calcTimeTillLevel:function(e,t){let a=t.numAuto||t?.numAuto===0?t.numAuto:1;if(0===a)return 1/0;let o=e.reqExp-e.curExp,i=this.calcEXPBonus(t);return Math.ceil(o/(e.prestigeBonus*i*a))*e.growthTime-e.elapsedTime},getNextShopCosts:function(e){let t=1,a=e.FarmingShopPlantTotalProduction||0===e.FarmingShopPlantTotalProduction?e.FarmingShopPlantTotalProduction:e.shopProdLevel,o=1,l=e.FarmingShopPlantGrowingSpeed||0===e.FarmingShopPlantGrowingSpeed?e.FarmingShopPlantGrowingSpeed:e.shopGrowingSpeed,n=e.FarmingShopPlantRankExpEarned||0===e.FarmingShopPlantRankExpEarned?e.FarmingShopPlantRankExpEarned:e.shopRankLevel,r=i.Z.pow(1.05,a-50),s=i.Z.multiplyDecimal(100,r),c=i.Z.pow(s,a),u=i.Z.multiplyDecimal(1e8,c);return{prodCost:t=a>50?u:i.Z.multiplyDecimal(1e8,i.Z.pow(100,a)),growthCost:i.Z.multiplyDecimal(i.Z.pow(500,l),1e10),expCost:i.Z.multiplyDecimal(i.Z.pow(250,n),1e15)}},calcMaxPrestige:function(e){let t=e.prestige,a=0,o=!0;for(;o;){let i=10*Math.pow(2,t),l=a+i;e.created.greaterThanOrEqualTo(l)?(t++,a+=i):o=!1}return t-e.prestige},calcTimeTillPrestige:function(e,t){let a=JSON.parse(JSON.stringify(e));this.resetPlantBD(a);let o=JSON.parse(JSON.stringify(t));this.resetModifiersBD(o);let l=o.numAuto||o?.numAuto===0?o.numAuto:1,n=!1,r=0,s=0,c=this.calcEXPBonus(o),u=a.prestigeBonus*c;for(;!n;){let e=this.calcTimeTillLevel(a,o),t=10*Math.pow(2,a.prestige),c=s+t,m=i.Z.subtractDecimal(c,a.created),p=i.Z.multiplyDecimal(i.Z.divideDecimal(m,a.perHarvest*l).ceil(),a.growthTime).ceil().toNumber();if(0===l&&m.greaterThan(0))n=!0,r=1/0;else if(p<=0)n=!0,r<=0&&(a.prestige++,n=!1,s+=t);else if(p>e){a.elapsedTime+=e;let t=Math.floor(a.elapsedTime/a.growthTime);a.created=i.Z.addDecimal(a.created,t*a.perHarvest*l),a.totalMade=i.Z.addDecimal(a.totalMade,t*a.perHarvest*l);let n=this.calcCarryOverEXP({plant:a,numAutos:l,expTick:u*t});a.Rank+=n.numLevels,a.curExp=n.leftOver,a.reqExp=n.reqExp,a.perHarvest=this.calcPlantHarvest(a,o),r+=e,a.elapsedTime=a.elapsedTime%a.growthTime}else{n=!0,a.elapsedTime+=p;let e=Math.floor(a.elapsedTime/a.growthTime);a.created=i.Z.addDecimal(a.created,e*a.perHarvest*l),a.totalMade=i.Z.addDecimal(a.totalMade,e*a.perHarvest*l),r+=p,a.elapsedTime=a.elapsedTime%a.growthTime}}return{remainingTime:r,prestige:a.prestige,prestiged:n}},resetPlantBD:function(e){e.totalMade=e?.totalMade?.mantissa||e?.totalMade?.mantissa===0?e.totalMade:i.Z.createDecimal(e.totalMade),e.created=e?.created?.mantissa||e?.created?.mantissa===0?e.created:i.Z.createDecimal(e.created),e.production=e?.production?.mantissa||e?.production?.mantissa===0?e.production:i.Z.createDecimal(e.production),e.futureMult=i.Z.createDecimal(e.futureMult)},resetModifiersBD:function(e){e.shopProdBonus=e?.shopProdBonus?.mantissa||e?.shopProdBonus?.mantissa===0?e.shopProdBonus:i.Z.createDecimal(e.shopProdBonus),e.hpBonus=e?.hpBonus?.mantissa||e?.hpBonus?.mantissa===0?e.hpBonus:i.Z.createDecimal(e.hpBonus),e.curPotatoes=e?.curPotatoes?.mantissa||e?.curPotatoes.mantissa===0?e.curPotatoes:i.Z.createDecimal(e.curPotatoes),e.totalPotatoes=e?.totalPotatoes?.mantissa||e?.totalPotatoes?.mantissa===0?e.totalPotatoes:i.Z.createDecimal(e.totalPotatoes)},calcHPProd:function(e,t){let a=JSON.parse(JSON.stringify(e));for(let e=0;e<a.length;e++)this.resetPlantBD(a[e]);let n=JSON.parse(JSON.stringify(t));this.resetModifiersBD(n),n.nextCosts.prodCost=i.Z.createDecimal(n.nextCosts.prodCost),n.nextCosts.growthCost=i.Z.createDecimal(n.nextCosts.growthCost),n.nextCosts.expCost=i.Z.createDecimal(n.nextCosts.expCost);let r=n.numAutos,s=n.time,c=n.startTime?n.startTime:0,u=n.runningTime?n.runningTime:0,m=n.maxSteps?n.maxSteps:100,p=n.tickStart?n.tickStart:0,d=n.tickRate?n.tickRate:60,h=n.dataPointThreshold?n.dataPointThreshold:s/d<m?1:o.Z.roundInt(s/d/m),g=[],f=[],D=n.totalPotatoes,P=n.curPotatoes,Z=Array(a.length).fill(0);for(let e=0;e<a.length;e++)Z[e]=a[e].production;let T=0,M=!1,S=1;for(d>2&&(S=.95);T<s/d||M;T++){let e=0;for(let t=a.length-1;t>=0;t--){let o=a[t],l=t===a.length-1?0:d>1?i.Z.multiplyDecimal(i.Z.addDecimal(Z[t+1],a[t+1].production),.55*d*S):i.Z.multiplyDecimal(a[t+1].production,d);o.totalMade=i.Z.addDecimal(o.totalMade,l),1===(o=this.calcFutureMult(o,{...n,time:d,numAuto:r[t],string:!1})).ID&&(e=Z[t]),Z[t]=o.production}n.passedTime+=d,n.potionRank>1&&!n.forceRankPotion&&(n.potionRankTime-=d,n.potionRankTime<0&&(n.potionRank=1));let t=o.Z.roundInt(T*d+c),m=d>1?i.Z.multiplyDecimal(i.Z.addDecimal(e,a[0].production),.55*d*S):a[0].production;if(D=i.Z.addDecimal(D,m),P=i.Z.addDecimal(P,m),n.autoBuyPBC){let e=!1,t=!0;for(;t;)if(t=!1,!0===P.greaterThanOrEqualTo(n.nextCosts.prodCost)&&(P=i.Z.subtractDecimal(P,n.nextCosts.prodCost),n.shopProdLevel++,n.shopProdBonus=this.calcShopProdBonus(n,n.shopProdLevel),e=!0,t=!0),!0===P.greaterThanOrEqualTo(n.nextCosts.growthCost)&&(P=i.Z.subtractDecimal(P,n.nextCosts.growthCost),n.shopGrowingSpeed++,e=!0,t=!0),!0===P.greaterThanOrEqualTo(n.nextCosts.expCost)&&(P=i.Z.subtractDecimal(P,n.nextCosts.expCost),n.shopRankLevel++,n.shopRankEXP=1+.1*n.shopRankLevel,e=!0,t=!0),e){let e=this.getNextShopCosts(n);n.nextCosts=e}}if(T%h==0&&t>=p&&t<=s+u&&(g.push({time:t,production:D}),f.push({time:t,fries:l.calcFryOutput(D,n)})),!n.skipFinal){if(M&&t>=s+u)break;!M&&t<s+u&&(M=!0)}}if(T>0&&!n.skipFinal){let e=o.Z.roundInt(T*d+c);if(n.passedTime=T*d+c,0===g.length)g.push({time:e,production:D}),f.push({time:e,fries:l.calcFryOutput(D,n)});else if(g[g.length-1].production!==D&&e>s+u){let t=e-g[g.length-1].time,a=i.Z.divideDecimal(i.Z.subtractDecimal(D,g[g.length-1].production),t),o=s+u-g[g.length-1].time,r=i.Z.addDecimal(g[g.length-1].production,i.Z.multiplyDecimal(a,o)),c={time:g[g.length-1].time+o,production:r};g.push(c),f.push({time:g[g.length-1].time+o,fries:l.calcFryOutput(r,n)}),D=r}}return{totalPotatoes:D,potatoeProduction:a[0].production,plants:a,nextCosts:n.nextCosts,dataPointsPotatoes:g,dataPointsFries:f,finalModifiers:n}},calcStepHPProd:function(e,t){let a=JSON.parse(JSON.stringify(e));for(let e=0;e<a.length;e++)this.resetPlantBD(a[e]);let i=JSON.parse(JSON.stringify(t));this.resetModifiersBD(i);let l=i.steps,n=-1,r=[],s=[],c=0,u=i.maxSteps?i.maxSteps:100,m=i.tickRate?i.tickRate:60,p=t.time/m<u?1:o.Z.roundInt(t.time/m/u);for(let e=0;e<l.length;e++)0!==l[e].time&&((i=(n=this.calcHPProd(a,{...i,numAutos:l[e].autos,time:l[e].time,dataPointThreshold:p,startTime:r.length>0?r[r.length-1].time:0,runningTime:c,skipFinal:e<l.length-1,tickStart:r.length>0?r[r.length-1].time+p*m:0})).finalModifiers).totalPotatoes=n.totalPotatoes,a=n.plants,r=r.concat(n.dataPointsPotatoes),s=s.concat(n.dataPointsFries),l[e].obj={text:`P${l.length-e} for ${l[e].time}`,numAutos:l[e].autos,time:l[e].time},c+=l[e].time);return n.dataPointsPotatoes=r,n.dataPointsFries=s,n.steps=l,n},calcAssemblyHP:function(e){let t=1;return e?.AssemblerCollection[0].BonusList[0].StartingLevel<=e?.AssemblerCollection[0].Level&&(t=Math.pow(1+e?.AssemblerCollection[0].BonusList[0].Gain,e?.AssemblerCollection[0].Level-e?.AssemblerCollection[0].BonusList[0].StartingLevel)),t},calcAssembly:function(e,t,a){let o=1;return e?.AssemblerCollection[t].BonusList[a].StartingLevel<=e?.AssemblerCollection[t].Level&&(o=Math.pow(1+e?.AssemblerCollection[t].BonusList[a].Gain,Math.max(0,e.AssemblerCollection[t].Level-(e.AssemblerCollection[t].BonusList[a].StartingLevel-1)))),o},calcAssemblyLine:function(e,t){let a=1;return e.StartingLevel<=t&&(a=Math.pow(1+e.Gain,Math.max(0,t-(e.StartingLevel-1)))),a},calcAssemblyCost:function(e,t){i.Z.createDecimal(-1);let a=i.Z.createDecimal(t.AssemblyCostReductionBonus),o=t.AssemblerCollection[e],l=i.Z.createDecimal(o.BaseCost),n=i.Z.addDecimal(l,i.Z.multiplyDecimal(l,o.Level)),r=1+o.CostExpo+o.CostExpo*o.Level*.02,s=i.Z.createDecimal(r),c=i.Z.pow(s,o.Level);return i.Z.divideDecimal(i.Z.multiplyDecimal(n,c),a)},calcProteinPerSecond:function(e){let t=i.Z.createDecimal(e.ProteinBonus),a=i.Z.createDecimal(e.FrenchFriesTotal),o=i.Z.createDecimal(1);if(a.greaterThan(1e10)){let e=i.Z.logDecimal(a,5);e=i.Z.subtractDecimal(e,13.48);let l=i.Z.logDecimal(a,10);l=i.Z.subtractDecimal(l,8),o=i.Z.multiplyDecimal(i.Z.multiplyDecimal(e,i.Z.pow(1.1,l)),t)}return o},calcContagionBonus:function(e,t){let a=1;return e.GrasshopperCollection[t].Locked>0&&(a*=Math.pow(1+.01*o.Z.calcPOW(e.GrasshopperCollection[t].BaseBonus),o.Z.calcPOW(e.GrasshopperCollection[t].Level))),a},calcExpeditionHP:function(e){let t=1;if(e.ExpeditionsCollection[16].Locked>0){let a=e.ExpeditionsCollection[16];t=Math.pow(1+a.BonusPower,a.Room-1)}return t},calcUniqueHPBonus:function(e){let t=1;for(let a=0;a<e.FarmingShopUniqueHealthy.length;a++)t*=e.FarmingShopUniqueHealthy[a]+1;return t},calcFriesHPBonus:function(e){return 1*(1+o.Z.calcPOW(e.FrenchFriesTotal)*((.01*e.FarmingShopFriesHealthyBonus+.1)*this.calcContagionBonus(e,5)))},calcPetHPBonus:function(e){let t=1,a=e.EquipedPetID,i=e.PetsCollection,l={};for(let e=0;e<a.length;e++)a[e]>0&&(l[a[e]]=!0);for(let e=0;e<i.length;e++){let a=i[e];if(a.ID in l)for(let e=0;e<a.BonusList.length;e++){let i=a.BonusList[e];23===i.ID&&(t+=.5*((Math.pow(1+i.Gain,a.Level)-1+Math.max(0,(.005*o.Z.calculateLogarithm(1.0125,a.Level+1)-1)*.5))*(1+.005*o.Z.calculateLogarithm(1.075,a.Rank+1))))}}return t},calcHPBonus:function(e){return o.Z.calcPOW(e.HealthyPotatoBonus)}};let n=l},5492:(e,t,a)=>{a.d(t,{Z:()=>o});let o={roundTwoDecimal:function(e){return Math.round((e+Number.EPSILON)*100)/100},roundThreeDecimal:function(e){return Math.round((e+Number.EPSILON)*1e3)/1e3},roundFiveDecimal:function(e){return Math.round((e+Number.EPSILON)*1e5)/1e5},roundInt:function(e){return Math.round((e+Number.EPSILON)*1)/1},calculateLogarithm:function(e,t){return Math.log(t)/Math.log(e)},calcPOW:function(e){return e.mantissa*Math.pow(10,e.exponent)},secondsToStringWithS:function(e){let t="",a=0,o=0,i=0,l=0;return(a=Math.floor(e/86400),o=Math.floor(e%86400/3600),i=Math.floor(e%3600/60),l=this.roundInt(e%86400%60),a==Number.POSITIVE_INFINITY||a==Number.NEGATIVE_INFINITY)?""+a:(60===l&&(l=0,i++),60===i&&(i=0,o++),24===o&&(o=0,a++),a>0&&(t+=`${a<10?"0"+a:a}d:`),o>0&&(t+=`${o<10?"0"+o:o}h:`),i>0&&(t+=`${i<10?"0"+i:i}m:`),l>0?t+=`${l<10?"0"+l:l}s`:t+="0s",t)},secondsToString:function(e){let t="",a=0,o=0,i=0;return(a=Math.floor(e/86400),o=Math.floor(e%86400/3600),60===(i=this.roundInt(e%3600/60))&&(i=0,o++),24===o&&(o=0,a++),a==Number.POSITIVE_INFINITY||a==Number.NEGATIVE_INFINITY)?""+a:(a>0&&(t+=`${a<10?"0"+a:a}d:`,0===o&&(t+="00h")),(o>0||0===o&&0===a)&&(t+=`${o<10?"0"+o:o}h`),0===a&&(t+=":",i>0?t+=`${i<10?"0"+i:i}m`:t+="0s"),t)},bonusColorMap:{1009:{color:"cyan"},1010:{color:"maroon"},1011:{color:"purple"},1012:{color:"yellow"},1013:{color:"red"},1014:{color:"blue"},1015:{color:"gray"},1016:{color:"green"}}}},92989:(e,t,a)=>{a.d(t,{Z:()=>i});var o=a(23367);let i={createDecimal:function(e){return new o.Z(e.mantissa||0===e.mantissa?`${e.mantissa}e${e.exponent}`:e)},multiplyDecimal:function(e,t){return(e=e.mantissa||0===e.mantissa?e:this.createDecimal(e)).times(t)},divideDecimal:function(e,t){return(e=e.mantissa||0===e.mantissa?e:this.createDecimal(e)).dividedBy(t)},addDecimal:function(e,t){return(e=e.mantissa||0===e.mantissa?e:this.createDecimal(e)).plus(t)},subtractDecimal:function(e,t){return(e=e.mantissa||0===e.mantissa?e:this.createDecimal(e)).minus(t)},logDecimal:function(e,t){return e=e.mantissa||0===e.mantissa?e:this.createDecimal(e),this.createDecimal(e.log(t))},pow:function(e,t){return(e=e.mantissa||0===e.mantissa?e:this.createDecimal(e)).pow(t)},min:function(e,t){return(e=e.mantissa||0===e.mantissa?e:this.createDecimal(e),t=t.mantissa||0===t.mantissa?t:this.createDecimal(t),e.greaterThan(t))?t:e},max:function(e,t){return(e=e.mantissa||0===e.mantissa?e:this.createDecimal(e),t=t.mantissa||0===t.mantissa?t:this.createDecimal(t),e.greaterThan(t))?e:t}}}};